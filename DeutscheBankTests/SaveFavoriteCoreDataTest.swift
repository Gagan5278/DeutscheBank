//
//  SaveFavoriteCoreDataTest.swift
//  DeutscheBankTests
//
//  Created by Gagan Vishal  on 2023/02/12.
//

import XCTest
@testable import DeutscheBank
final class CoreDataTest: XCTestCase {

    override func setUp() {
    }

    override func tearDown() {
    }

    //MARK:- Test Save Data
    func testimportDataFrom() {
        let fakeModel = FakeModel.createFakeModel()
        let managedObject =   SavedCity.importDataFrom(model: fakeModel, intoManagedObjectContext: CoreDataStackInMemory.sharedInstance.managedObjectContext)
        XCTAssertNotNil(managedObject, "Unable to save/import item in core data")
        managedObject?.model = fakeModel
    }
    
    func testSerahcAndCreateObjectIfNotExistWithIdentifier() {
        let model = SavedCity.SerahcAndCreateObjectIfNotExistWithIdentifier(identifier: "1234567", intoManagedObhectContext: CoreDataStackInMemory.sharedInstance.managedObjectContext)
        XCTAssertNotNil(model)
    }
    
    func testinsertNewObjectInContext()
    {
        XCTAssertNotNil(SavedCity.insertNewObjectInContext(context: CoreDataStackInMemory.sharedInstance.managedObjectContext))
    }
    
    
    //MARK:- Test Model equality
    func testSavedModelEqaulity() {
        let fakeModel = FakeModel.createFakeModel()
        let managedObject = SavedFavoriteEntity.importDataFrom(model: fakeModel, intoManagedObjectContext: CoreDataStackInMemory.sharedInstance.managedObjectContext)
        XCTAssertTrue(managedObject?.model.name == fakeModel.name)
    }
    
}
